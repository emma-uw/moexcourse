---
sidebar_position: 7.1
---

# 7.1. Выборы API

Выбор подходящего брокерского API - важный шаг для успешной интеграции. Рассмотрим основные варианты российских брокеров и их особенности.

## Finam Trade API

### Особенности
- **Тип**: REST API + WebSocket для реального времени
- **Документация**: Подробная, с примерами на Python
- **Стоимость**: Бесплатно для квалифицированных инвесторов
- **Особенности**: Полный доступ к рынкам, хорошая поддержка

### Начало работы
```python
# Установка
pip install finam-trade-api

# Базовое использование
from finam import FinamTradeApi

api = FinamTradeApi(
    client_id='your_client_id',
    client_secret='your_client_secret',
    access_token='your_access_token'
)

# Получение портфеля
portfolio = api.get_portfolio()
print(portfolio)
```

### Получение токенов
1. Зарегистрироваться на [finam.ru](https://www.finam.ru)
2. Пройти квалификацию инвестора
3. В личном кабинете создать приложение
4. Получить Client ID и Client Secret
5. Авторизоваться через OAuth 2.0

## Tinkoff Invest API

### Особенности
- **Тип**: gRPC API (высокая производительность)
- **Документация**: Отличная, с SDK на разных языках
- **Стоимость**: Бесплатно для Тинькофф Инвестиций клиентов
- **Особенности**: Современная архитектура, песочница для тестирования

### Начало работы
```python
# Установка
pip install tinkoff-investments

# Использование
from tinkoff.invest import Client

with Client(token='your_token') as client:
    # Получение аккаунтов
    accounts = client.users.get_accounts()
    
    # Получение портфеля
    portfolio = client.operations.get_portfolio(account_id=accounts.accounts[0].id)
    print(portfolio)
```

### Получение токенов
1. Открыть счет в Тинькофф Инвестициях
2. В приложении/личном кабинете сгенерировать токен
3. Использовать токен для аутентификации

### Преимущества
- Песочница (Sandbox) для безопасного тестирования
- Высокая скорость через gRPC
- Поддержка всех рынков

## Alor OpenAPI

### Особенности
- **Тип**: REST API + WebSocket
- **Документация**: Хорошая, с примерами
- **Стоимость**: Бесплатно для Алор Брокер клиентов
- **Особенности**: Простота использования, хорошая поддержка

### Начало работы
```python
# Установка
pip install alor-openapi

# Использование
from alor import AlorOpenApi

api = AlorOpenApi(
    refresh_token='your_refresh_token'
)

# Получение позиций
positions = api.get_positions()
print(positions)
```

### Получение токенов
1. Зарегистрироваться в Алор Брокер
2. Получить доступ к OpenAPI
3. Сгенерировать токены в личном кабинете

## Сравнение API

| Критерий | Finam | Tinkoff | Alor |
|----------|-------|---------|------|
| Сложность | Средняя | Высокая | Низкая |
| Документация | Хорошая | Отличная | Хорошая |
| Скорость | Высокая | Очень высокая | Высокая |
| Песочница | Нет | Есть | Есть |
| Поддержка | Хорошая | Отличная | Хорошая |
| Стоимость | Бесплатно* | Бесплатно | Бесплатно |

* Требуется квалификация инвестора

## Другие варианты

### БКС Express
- REST API
- Хорошая документация
- Поддержка всех рынков

### Открытие Брокер
- REST API
- Простота использования
- Хорошая поддержка

### ВТБ Мои Инвестиции
- REST API
- Интеграция с ВТБ
- Развивающаяся платформа

## Критерии выбора

### Для начинающих:
- **Alor OpenAPI**: Простота и хорошая документация
- **Tinkoff Sandbox**: Безопасное тестирование

### Для продвинутых:
- **Tinkoff Invest API**: Высокая производительность
- **Finam Trade API**: Полный функционал

### Для профессионалов:
- **Tinkoff Invest API**: gRPC, высокая скорость
- **Finam Trade API**: Надежность и функциональность

## Безопасность токенов

### Хранение токенов
```python
# Использование переменных окружения
import os

# .env файл
FINAM_CLIENT_ID=your_client_id
FINAM_CLIENT_SECRET=your_client_secret
TINKOFF_TOKEN=your_tinkoff_token

# В коде
client_id = os.getenv('FINAM_CLIENT_ID')
token = os.getenv('TINKOFF_TOKEN')
```

### Лучшие практики
1. Никогда не храните токены в коде
2. Используйте переменные окружения
3. Регулярно обновляйте токены
4. Ограничивайте права доступа
5. Мониторьте использование API

## Тестирование API

### Песочницы (Sandbox)
```python
# Tinkoff Sandbox
from tinkoff.invest import Client

# Использование песочницы
with Client(token='sandbox_token', sandbox=True) as client:
    # Безопасное тестирование
    pass
```

### Ограничения
- Ограниченное количество запросов
- Виртуальные деньги
- Не все функции доступны

## Рекомендации

1. **Начните с песочницы**: Тестируйте на виртуальных данных
2. **Изучите документацию**: Потратьте время на изучение API
3. **Начинайте с простого**: Используйте базовые функции
4. **Тестируйте тщательно**: Проверяйте на разных условиях
5. **Имейте план B**: Будьте готовы к смене брокера

Выбор API зависит от ваших потребностей, опыта и требований к функциональности. Рекомендую начать с Tinkoff или Alor из-за наличия песочницы и хорошей документации.
